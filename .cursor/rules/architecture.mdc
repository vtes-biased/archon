---
alwaysApply: true
---

RULE: Archon is event-driven VTES tournament system. Key patterns: JSONB storage (no migrations), offline-first (browser=SoT), async psycopg3+FastAPI. Entry points: `src/archon/app/main.py` (FastAPI+lifespan), `src/archon/engine.py` (event processing), `src/archon/db.py` (async PostgreSQL), `src/archon/cli.py` (Typer), `src/archon/models.py` (Pydantic+JSONB). Events in `src/archon/events.py` are idempotent/replayable. VEKN sync on startup (skipped in debug). Independent rating calc. Frontend: Parcel→`src/archon/static/`. Dev: `make serve` (PM2). Deploy: Ansible+vault. Auth: Discord OAuth + email/JWT. Roles: judges vs players. DB: members/tournaments/events tables, JSONB fields, unique indexes on discord_id/email/vekn.RULE: Archon is event-driven VTES tournament system. Key patterns: JSONB storage (no migrations), offline-first (browser=SoT), async psycopg3+FastAPI. Entry points: `src/archon/app/main.py` (FastAPI+lifespan), `src/archon/engine.py` (event processing), `src/archon/db.py` (async PostgreSQL), `src/archon/cli.py` (Typer), `src/archon/models.py` (Pydantic+JSONB). Events in `src/archon/events.py` are idempotent/replayable. VEKN sync on startup (skipped in debug). Independent rating calc. Frontend: Parcel→`src/archon/static/`. Dev: `make serve` (PM2). Deploy: Ansible+vault. Auth: Discord OAuth + email/JWT. Roles: judges vs players. DB: members/tournaments/events tables, JSONB fields, unique indexes on discord_id/email/vekn.